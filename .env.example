# SecretFlow 隐私计算后端环境变量配置模板
# 复制此文件为 .env 并修改相应配置

# =================================================================
# 节点基本配置
# =================================================================
NODE_ID=alice                                    # 节点唯一标识 (alice, bob, charlie, etc.)
NODE_IP=localhost                                # 节点IP地址
NODE_PORT=9394                                   # 节点端口
NODE_TYPE=worker                                 # 节点类型

# =================================================================
# Redis 配置 (消息队列和结果存储)
# =================================================================
REDIS_HOST=localhost                             # Redis主机地址
REDIS_PORT=6379                                  # Redis端口
REDIS_PASSWORD=                                  # Redis密码 (可选)
REDIS_DB=0                                       # Redis数据库编号

# =================================================================
# Celery 配置
# =================================================================
CELERY_BROKER_URL=redis://localhost:6379/0       # 消息队列URL
CELERY_RESULT_BACKEND=redis://localhost:6379/0   # 结果存储URL
CELERY_TASK_SERIALIZER=json                      # 任务序列化格式
CELERY_RESULT_SERIALIZER=json                    # 结果序列化格式
CELERY_ACCEPT_CONTENT=["json"]                   # 接受的内容类型
CELERY_TIMEZONE=Asia/Shanghai                    # 时区设置
CELERY_ENABLE_UTC=true                           # 启用UTC时间

# =================================================================
# SecretFlow 集群配置
# =================================================================
CLUSTER_CONFIG={"alice": "localhost:9394", "bob": "localhost:9395"}
CLUSTER_NODES=localhost:9394,localhost:9395      # 集群节点列表

# =================================================================
# Ray 集群配置 (SecretFlow 生产模式)
# =================================================================
RAY_HEAD_IP=                                     # Ray集群头节点IP (可选)
RAY_HEAD_PORT=10001                              # Ray集群头节点端口

# =================================================================
# 安全配置
# =================================================================
SECURITY_TOKEN=your-security-token-here          # 安全认证令牌 (必须修改)
SSL_CERT_PATH=                                   # SSL证书路径 (可选)
SSL_KEY_PATH=                                    # SSL私钥路径 (可选)

# =================================================================
# 数据和存储配置
# =================================================================
DATA_PATH=/app/data                              # 数据存储路径
TEMP_PATH=/tmp                                   # 临时文件路径
LOG_LEVEL=INFO                                   # 日志级别: DEBUG, INFO, WARNING, ERROR

# =================================================================
# 计算资源配置 (单任务模式，确保SecretFlow正确运行)
# =================================================================
MAX_CONCURRENT_TASKS=1                           # 最大并发任务数(单任务模式)
TASK_TIMEOUT=3600                                # 任务超时时间(秒)
MEMORY_LIMIT=4GB                                 # 内存限制

# =================================================================
# 监控和管理配置
# =================================================================
FLOWER_BASIC_AUTH=admin:password                 # Flower监控界面认证
FLOWER_PORT=5555                                 # Flower端口

# =================================================================
# 开发环境配置 (仅开发时使用)
# =================================================================
DEBUG=false                                      # 调试模式
ENABLE_PROFILING=false                           # 启用性能分析
DEV_MODE=false                                   # 开发模式

# =================================================================
# 生产环境额外配置
# =================================================================
# 以下配置仅在生产环境中使用，开发环境可以忽略

# 日志配置
LOG_FILE_PATH=/app/logs/secretflow.log           # 日志文件路径
LOG_ROTATION_SIZE=100MB                          # 日志轮转大小
LOG_BACKUP_COUNT=10                              # 日志备份数量

# 监控配置
METRICS_ENABLED=true                             # 启用指标收集
METRICS_PORT=9090                                # 指标端口
HEALTH_CHECK_INTERVAL=30                         # 健康检查间隔(秒)

# 网络配置
MAX_CONNECTIONS=1000                             # 最大连接数
CONNECTION_TIMEOUT=30                            # 连接超时时间(秒)
KEEPALIVE_TIMEOUT=5                              # 保活超时时间(秒)
