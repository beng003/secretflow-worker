# ========================================
# 节点1配置示例 (Ray头节点)
# ========================================

# ========== 节点基础配置 ==========
NODE_ID=node1
NODE_IP=192.168.1.10
APP_ENV=production

# ========== Redis配置 ==========
REDIS_URL=redis://127.0.0.1:60379/0
REDIS_PASSWORD=

# ========== Ray集群配置 ==========
# 每个节点都启动独立的Ray集群
RAY_PORT=61379
RAY_NUM_CPUS=0
RAY_OBJECT_STORE_MEMORY=2000000000

# ========== SecretFlow端口范围配置 ==========
SF_PORT_RANGE_START=19000
SF_PORT_RANGE_END=19009
SPU_PORT_RANGE_START=19500
SPU_PORT_RANGE_END=19509
HEU_PORT_RANGE_START=19800
HEU_PORT_RANGE_END=19809

# ========== Celery Worker配置 ==========
WORKER_CONCURRENCY=2
WORKER_HOSTNAME=node1@127.0.0.1
CELERY_LOG_LEVEL=INFO
WORKER_QUEUES=secretflow_queue
WORKER_POOL=prefork
WORKER_MAX_TASKS_PER_CHILD=100
WORKER_PREFETCH_MULTIPLIER=1
WORKER_TASK_ACKS_LATE=true
WORKER_TASK_REJECT_ON_WORKER_LOST=true

# ========== Celery任务配置 ==========
WORKER_TASK_SOFT_TIME_LIMIT=3600
WORKER_TASK_TIME_LIMIT=3900
CELERY_RESULT_EXPIRES=86400
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json

# ========== Celery队列路由 ==========
CELERY_DEFAULT_QUEUE=secretflow_queue
CELERY_DEFAULT_EXCHANGE=secretflow
CELERY_DEFAULT_EXCHANGE_TYPE=direct
CELERY_DEFAULT_ROUTING_KEY=secretflow

# ========== Celery Worker行为 ==========
WORKER_SHUTDOWN_TIMEOUT=300
WORKER_SEND_TASK_EVENTS=false
CELERY_ENABLE_UTC=true
CELERY_TIMEZONE=Asia/Shanghai

# ========== Celery监控端口 ==========
CELERY_MONITOR_PORT=8088

# ========== 任务状态通知配置 ==========
TASK_STATUS_CALLBACK_URL=
TASK_STATUS_CALLBACK_TIMEOUT=10

# ========== 日志配置 ==========
LOG_LEVEL=INFO
LOG_PATH=/app/logs

# ========== 数据目录 ==========
DATA_PATH=/app/data

# ========== SPU连接参数 ==========
SPU_PROTOCOL=SEMI2K
SPU_FIELD=FM64
SPU_ENABLE_TLS=false

# ========== 资源限制 ==========
MAX_MEMORY_BYTES=0
MAX_CPU_PERCENT=0
